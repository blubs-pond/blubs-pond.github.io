
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Terminal</title>
    <link rel="stylesheet" href="css/cmd.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div id="terminal-container">
        <div id="terminalOutput"></div>
    </div>
    <div id="input-line" class="input-line">
        <span id="prompt">$</span>
        <input type="text" id="command-input" class="command-input" autofocus>
    </div>

    <!-- Hidden UI Components -->
    <div id="game-area-container" style="display:none;"></div>
    <div id="stat-bar" style="display:none;"></div>
    <div id="map-area" style="display:none;"></div>
    <div id="user-ui" style="display:none;"></div>

    <script type="module">
        import { Terminal, TerminalLib, VirtualOS } from './js/centralTerminal.js';
        import { loadFileSystemAddon } from './js/filesystem_addon.js';

        const termOutput = document.getElementById("terminalOutput");
        const term = new Terminal("BlubTerminal", termOutput);
        const vOS = new VirtualOS();
        const termLib = new TerminalLib(term, vOS);

        // Load the custom file system
        loadFileSystemAddon(vOS);

        const input = document.getElementById("command-input");

        term.print("Welcome to the fully refactored terminal!");
        term.print("Type 'help' to see the list of available commands.");

        input.addEventListener("keydown", e => {
            if (e.key === "Enter") {
                const commandText = input.value.trim();
                term.print(`$ ${commandText}`);
                if (commandText) {
                    // Corrected method call
                    termLib.executeCommand(commandText);
                    input.value = "";
                }
            }
        });
    </script>
</body>
</html>
